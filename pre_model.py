import pandas as pd
from sklearn.linear_model import LogisticRegression
import joblib

# -----------------------------
# TRAINING DATA
# (real + synthetic is OK)
# -----------------------------


    # HUMAN (label = 0)
dataset = [
    [3, 0, 3.6419999599456787, 0],
    [3, 0, 3.2130000591278076, 0],
    [9, 0, 2.3814999759197235, 0],
    [5, 0, 6.611999988555908, 0],
    [5, 0, 7.347500026226044, 0],
    [5, 0, 5.88824999332428, 0],
    [6, 0, 5.999599981307983, 0],
    [3, 0, 6.358999967575073, 0],
    [5, 0, 6.323249995708466, 0],
    [5, 0, 6.046999990940094, 0],
    [5, 0, 5.902750015258789, 0],
    [5, 0, 5.837000012397766, 0],
    [5, 0, 6.836000025272369, 0],
    [21, 7, 1.2704499959945679, 0],
    [1, 0, 30, 0],
    [18, 7, 0.9538235243629006, 1],
    [24, 10, 1.136043476021808, 1],
    [23, 9, 1.126727277582342, 1],
    [18, 7, 0.9538235243629006, 1],
    [24, 10, 1.136043476021808, 1],
    [23, 9, 1.126727277582342, 1],
     [18, 7, 0.9538235243629006, 1],
    [24, 10, 1.136043476021808, 1],
    [23, 9, 1.126727277582342, 1],
     [18, 7, 0.9538235243629006, 1],
    [24, 10, 1.136043476021808, 1],
    [23, 9, 1.126727277582342, 1]

]



df = pd.DataFrame(
    dataset,
    columns=["requests", "fails", "avg_delta", "label"]
)

# -----------------------------
# SPLIT FEATURES / LABEL
# -----------------------------
X = df[["requests", "fails", "avg_delta"]]
y = df["label"]

# -----------------------------
# TRAIN MODEL
# -----------------------------
model = LogisticRegression()
model.fit(X, y)

# -----------------------------
# SAVE MODEL
# -----------------------------
joblib.dump(model, "model.pkl")

print("âœ… Logistic Regression model trained and saved as model.pkl")
